# iSpring_dwh

Репозиторий содержит один из вариантов решения тестового задания на DataIngeneer в iSpring.

Для решения поставленных задач спроектирована и создана база данных database_dwh (MySQL 5.7).

Структура базы приведена на диаграмме ...

### Краткое описание ETL-модуля, реализованного на Python 3.8

Модуль состоит из 4 приложений:

**historical_rate.py** - взаимодействует с API ЦБ РФ, наполняет таблицу ***staging*** тестовыми данными по курсам валют за регулируемое количество дней.

**rate_checker.py** - взаимодействует с API ЦБ РФ, получает ежедневные курсы валют, 
записывает в таблицу ***staging***. Может запускаться по расписанию (пример для Cron: 0 12 * * * /path/to/file/rate_checker.sh)

**stage-to-core** - переносит данные в нормализованную таблицу ***core***.

**datamarts_maker.py** - рассчитывает курсы "все-ко-всем" на основе данных из ***core***, 
создаёт таблицу ***all_to_all***; формирует три "витрины" в соответствие с заданием: ***datamart1***(table), ***datamart2***(table) и ***datamart3***(view)
